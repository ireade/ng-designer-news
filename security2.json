{
    "rules": {
      
        ".read": true,
        
        "stories": {
          
          "$story_id": {
          
            "title": { 
              ".write": "!data.exists()",
              ".validate": "newData.isString()" 
            },
            
            "url": { ".validate": "newData.isString()" },
            "description": { ".validate": "newData.isString()" },
            
            "category": {
              ".write": "!data.exists()",
              ".validate": "newData.isString()"
            },
            
            "date": {
              ".write": "!data.exists()",
              ".validate": "newData.val() <= now"
            },
            
            "commentCount": {
              ".write": "newData.val() === data.val() + 1"
            },
            
            "comments": {
              
              "$comment_id": {
                
                "date": {
                  ".write": "!data.exists()",
                  ".validate": "newData.val() <= now"
                },
                
                "text": { 
                  ".write": "!data.exists()",
                  ".validate": "newData.isString()"
                }
            
              }
            },
            
            
            "voteCount": {
              
              ".write": "auth.uid !== root.child('stories/'+$story_id+'/user/id').val()",

              ".write": "auth.uid === root.child('stories').child($story_id).child('user').child('id').val()"
              
            },
            
            "voters": {
              ".write": true
            }
            
            
          }
        },
        
        "users": {
          
          ".write": true,
          
          "$user_id": {
            
            "karma": {
              ".write": "newData.val() === data.val() + 1"
            }
          }
          
        }
    }
}